<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <title>SQL 1 | Introduction</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.0.3">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    
    <link rel="next" href="..\../web/sql2/sql2.html" />
    
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../../gitbook/style.css">


        
    <div class="book"  data-level="2.1" data-basepath="..\.." data-revision="1420528061900">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="..\../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" >
            
            <span><b>1.</b> Club Items</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.1" data-path="home/constitution/constitution.html">
            
                
                    <a href="..\../home/constitution/constitution.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                         Constitution
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="2" >
            
            <span><b>2.</b> Web</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter active" data-level="2.1" data-path="web/sql1/sql1.html">
            
                
                    <a href="..\../web/sql1/sql1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                         SQL 1
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.2" data-path="web/sql2/sql2.html">
            
                
                    <a href="..\../web/sql2/sql2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                         SQL 2
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="3" >
            
            <span><b>3.</b> Forensics</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.1" data-path="forensics/steg1/steg1.html">
            
                
                    <a href="..\../forensics/steg1/steg1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                         Steganography 1
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="4" >
            
            <span><b>4.</b> Hardware</span>
            
            
        </li>
    
        
        <li class="chapter " data-level="5" >
            
            <span><b>5.</b> Software</span>
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="5.1" data-path="software/blender1/blender1.html">
            
                
                    <a href="..\../software/blender1/blender1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                         Blender 1
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.2" data-path="software/blender2/blender2.html">
            
                
                    <a href="..\../software/blender2/blender2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                         Blender 2
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="6" >
            
            <span><b>6.</b> Binary</span>
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="..\../" >Introduction</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_280">
                    
                        <h1 id="sql-injections">SQL Injections</h1>
<h3 id="what-is-sql">What is SQL?</h3>
<p>SQL or Structured Query Language is a special language used to communicate with a database (usually located on the web server). It is specifically designed to manage data located in a relational database management system (DBMS). Most web servers or database systems utilize SQL databases. Each version of the SQL databases is different and some versions are proprietary. However, all of them contain quite a few inherent commands.</p>
<h3 id="what-can-sql-do">What can SQL do?</h3>
<ul>
<li>Retrieve records from a database (articles, posts, comments, etc.)</li>
<li>Insert records into a database (registration, grades, survey response, etc.)</li>
<li>Update pre-existing records (change of address, preference change, Le Fail Counter, etc.)</li>
<li>Create new databases and tables</li>
<li>Execute malicious queries to DROP all of the tables (it&#39;s very possible)</li>
<li>Many other useful tasks not mentioned here</li>
</ul>
<h3 id="basic-structure">Basic Structure</h3>
<p>A server contains databases. Each database contains tables. Each table contains rows and columns. I hope you know what a table looks like. But to be safe, I&#39;ll show you an example. For the purpose of this lesson, let&#39;s create an imaginary database called <strong>tutorial_1</strong> with a table named <strong>secrets</strong>. The data below shows the structure of the table.</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>Secret</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Karina</td>
<td>uBarr</td>
</tr>
<tr>
<td>2</td>
<td>Bob</td>
<td>chicken</td>
</tr>
<tr>
<td>3</td>
<td>Mark</td>
<td>600</td>
</tr>
<tr>
<td>4</td>
<td>Andy</td>
<td>windows</td>
</tr>
<tr>
<td>5</td>
<td>Nicolas</td>
<td>sqlsql</td>
</tr>
</tbody>
</table>
<p>As you can see, the table contains three columns and five rows. I explicitly stated this so you do not get confused when I refer to columns or rows later on.</p>
<h3 id="queries">Queries</h3>
<p>Queries allow users to tell the DBMS what the desired data is. The DBMS will plan and optimize the search operations, which makes this extremely easy for the users. Note: most queries take under a few milliseconds. The most common and crucial (might be debatable?) statement in SQL is <strong>SELECT</strong>. Examples and general formatting is shown below. Quotes are there for clarification purposes. Database and column names do no need single quotes around them (unless you want case sensitivity). However, text values, especially those after WHERE optional clause do require single quotes.</p>
<pre><code class="lang-sql"><span class="hljs-operator"><span class="hljs-keyword">SELECT</span> <span class="hljs-string">'column_name(s)'</span> <span class="hljs-keyword">FROM</span> <span class="hljs-string">'table(s)'</span> <span class="hljs-keyword">WHERE</span> <span class="hljs-string">'criterion'</span></span>
</code></pre>
<p>Below are some sample queries.</p>
<pre><code class="lang-sql"><span class="hljs-comment">--Get all columns from the table.</span>
<span class="hljs-operator"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> secrets

<span class="hljs-comment">--Get only the column name</span>
<span class="hljs-keyword">SELECT</span> Name <span class="hljs-keyword">FROM</span> secrets

<span class="hljs-comment">--Get the name of the person whose ID is 4</span>
<span class="hljs-keyword">SELECT</span> Name <span class="hljs-keyword">FROM</span> secrets <span class="hljs-keyword">WHERE</span> ID=<span class="hljs-number">4</span>

<span class="hljs-comment">--Whose secret is uBarr?</span>
<span class="hljs-keyword">SELECT</span> Name <span class="hljs-keyword">FROM</span> secrets <span class="hljs-keyword">WHERE</span> Secret=<span class="hljs-string">'uBarr'</span>

<span class="hljs-comment">--Get the ID if the person is Bob or his secret 600</span>
<span class="hljs-keyword">SELECT</span> ID <span class="hljs-keyword">FROM</span> secrets <span class="hljs-keyword">WHERE</span> Name=<span class="hljs-string">'Bob'</span> <span class="hljs-keyword">AND</span> Secret=<span class="hljs-string">'600'</span>
<span class="hljs-comment">--Note that 600 is not a number because it is in a text field</span></span>
</code></pre>
<h3 id="mysql-and-php">MySQL and PHP</h3>
<p>The fun part begins here. You can execute queries on an SQL server, but it would be pointless if there was no integration or interaction with website viewers and physical web pages. Here is where PHP and MySQL comes into play. As I mentioned before, there are many versions of SQL databases (Oracle, MySQL, Microsoft SQL Server, PostgreSQL, DB2, SQlite, etc.). However, the one we will be focusing on is MySQL. MySQL is open source and it functions well with PHP. What makes it even better is that the syntax is easy to understand and horrible queries leave a lot of room for exploitations.</p>
<p>We already looked at basic queries. Now let&#39;s look at how those queries are used with PHP.</p>
<pre><code class="lang-php"><span class="hljs-preprocessor">&lt;?php</span>

<span class="hljs-comment">//Create a new database</span>
<span class="hljs-comment">//$database = new mysqli( DB_HOST, DB_USER, DB_PASS, DB_NAME );</span>
<span class="hljs-variable">$database</span> = <span class="hljs-keyword">new</span> mysqli( <span class="hljs-string">'localhost'</span>, <span class="hljs-string">'DB_USER'</span>, <span class="hljs-string">'DB_PASS'</span>, <span class="hljs-string">'tutorial_1'</span> );

<span class="hljs-comment">//For debugging purposes in case the connection failed</span>
<span class="hljs-keyword">if</span>( !<span class="hljs-variable">$database</span> )
{
    <span class="hljs-keyword">die</span>( <span class="hljs-string">'MySQL: Wrong credentials'</span> );
}

<span class="hljs-comment">//Execute a query</span>
<span class="hljs-variable">$result</span> = <span class="hljs-variable">$database</span><span class="hljs-variable">-&gt;query</span>
(
    <span class="hljs-string">"SELECT Secret FROM secrets"</span>
);

<span class="hljs-comment">//For debugging purposes in case the query failed</span>
<span class="hljs-keyword">if</span>( !<span class="hljs-variable">$result</span> )
{
    <span class="hljs-keyword">die</span>( <span class="hljs-string">'MySQL: Syntax error'</span> );
}

<span class="hljs-comment">//Print out all of the secrets in the order in which they were retrieved</span>
<span class="hljs-keyword">while</span>( <span class="hljs-variable">$row</span> = mysqli_fetch_assoc( <span class="hljs-variable">$result</span> ) )
{
    <span class="hljs-keyword">echo</span>( <span class="hljs-string">"Secrets: "</span> . <span class="hljs-variable">$row</span>[<span class="hljs-string">'Secret'</span>] );
}

<span class="hljs-preprocessor">?&gt;</span>
</code></pre>
<h3 id="further-readings-and-references">Further Readings and References</h3>
<p>&quot;Back to Basics: Writing SQL Queries&quot; - <a href="http://robots.thoughtbot.com/back-to-basics-sql" target="_blank">http://robots.thoughtbot.com/back-to-basics-sql</a></p>
<p>&quot;SQL Injection&quot; - <a href="http://www.w3schools.com/sql/sql_injection.asp" target="_blank">http://www.w3schools.com/sql/sql_injection.asp</a></p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        
        <a href="..\../web/sql2/sql2.html" class="navigation navigation-next navigation-unique" aria-label="Next page: SQL 2"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
